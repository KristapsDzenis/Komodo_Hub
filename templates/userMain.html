<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link id="style" href="../static/userMain.css" rel="stylesheet" type="text/css" />
    <title>My posts!</title>
</head>
<body>

    <div class="topnav">
        <a href="#home">Komodo Hub</a>
        <h1>Hello, {{ username }}</h1>
        <a href="/">Sign Out</a>
    </div>

    <!-- Chat Box Container -->
    <div class="chat-container">
        <div class="chat-box">
            <div id="chat-messages"></div>

            <!-- Chat Input -->
            <div class="chat-input">
                <input type="text" id="message-input" placeholder="Type your message here..." />
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <script>
        function sendMessage() {
            const messageInput = document.getElementById('message-input');
            const messageText = messageInput.value.trim();

            if (messageText === '') return;

            const messageElement = document.createElement('div');
            messageElement.classList.add('message');

            const profileImage = document.createElement('img');
            profileImage.src = userData.profile_image_url;
            profileImage.alt = userData.username;

            const messageContent = document.createElement('div');
            messageContent.classList.add('message-content');

            const messageInfo = document.createElement('div');
            messageInfo.classList.add('message-info');
            messageInfo.innerHTML = `<strong>${userData.username}</strong> from <em>${userData.org_school_name}</em>`;

            const messageTextElement = document.createElement('div');
            messageTextElement.classList.add('message-text');
            messageTextElement.textContent = messageText;

            messageContent.appendChild(messageInfo);
            messageContent.appendChild(messageTextElement);
            messageElement.appendChild(profileImage);
            messageElement.appendChild(messageContent);

            const chatMessagesDiv = document.getElementById('chat-messages');
            chatMessagesDiv.appendChild(messageElement);

            messageInput.value = '';
        }

        window.onload = fetchUserInfo;
    </script>

</body>
</html>
